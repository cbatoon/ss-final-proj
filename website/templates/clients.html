{% extends "base.html" %}{% block title %}View Clients{% endblock %}

{% block content %}
<h2 class="mt-4">Client Accounts</h2>

<table class="table table-striped table-hover mt-3">
  <thead class="thead-dark">
    <tr>
      <th>ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Address</th>
      <th>Balance</th>
      <th>Credit Score</th>
      <th>Routing #</th>
      <th>Account #</th>
      <th>SSN</th>
    </tr>
  </thead>
  <tbody>
    {% for c in customers %}
    <tr>
      <td>{{ c.customerNum }}</td>
      <td>{{ c.customerFirst }}</td>
      <td>{{ c.customerLast }}</td>
      <td>{{ c.address }}</td>
      <td>${{ "%.2f"|format(c.balance) }}</td>
      <td>{{ c.creditScore }}</td>
      {% if user.role in ['admin', 'owner'] %}
        <td>{{ c.bankNumR }}</td>
      {% else %}
        <td>*****{{ (c.bankNumR|string)[-4:] }}</td>
      {% endif %}

      {% if current_user.role in ['admin','owner'] %}
        <td>{{ c.bankNumA }}</td>
        <td>{{ c.SSN }}</td>
      {% else %}
        <td>****{{ c.bankNumA[-4:] }}</td>
        <td>***-**-{{ ("%09d"|format(c.SSN))[-4:] }}</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}